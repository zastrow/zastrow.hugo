{{ define "main" }}
  {{ $paginator := .Paginator }}
  <div>
    {{ partial "pagination.html" . }}
    {{ .Scratch.Set "index" 0 }}
    {{ range (.Paginator 20).Pages }}
      {{- $.Scratch.Set "index" (add ($.Scratch.Get "index") 1) -}}
      {{- .Scratch.Set "index" ($.Scratch.Get "index") -}}
      {{- $i := $.Scratch.Get "index" -}}
      {{- $gt := gt $i ( mul 2 ( math.Floor ( div $i 2.0 ) ) ) -}}
      
      {{ .Scratch.Set "tag" "unset"}}
      
      {{ range .Params.tags }}{{ $.Scratch.Set "tag" (lower .) }}{{end}}
      
      {{ $tag := $.Scratch.Get "tag" }}
      
      {{- if $gt -}}{{- "" -}}{{- else -}}{{- "" -}}{{- end -}}
      {{ if (ne $tag "")}}{{- "" -}}{{ end }}

      <div class="{{ if (ne $tag "")}}obj-width-{{$tag}}{{ end }}">
        <section class="cmp-post">
          {{- if .Date -}}
          <div class="cmp-post__meta">
            <a href="{{ .RelPermalink }}">
              <time datetime="{{ .Date }}">
                {{ .Date.Format "2 January 2006" }}
              </time>
            </a>
          </div>
          {{- end -}}
          {{ .Content }}
        </section>
      </div>

      {{- if $gt -}}{{- "" -}}{{- else -}}{{- "" -}}{{- end -}}

    {{ end }}
    {{ partial "pagination.html" . }}
  </div>
{{ end }}